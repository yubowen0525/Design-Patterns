# 依赖注入
目前主流的依赖注入有：dig, wire

加入依赖注入，不在需要将参数传来传去，而是交给库去处理。dig采用反射，而wire采用生成代码去解决。

# Dig
上面的例子中涉及两种对象类型构造，一种是struct 指针，一种是 interface 类型。dig会自动做类型判定和绑定。在容器中的对象都是单例对象。dig还有对注入的对象进行分组特性，在使用时，根据自身需要使用。

# 总结
1. dig 通过反射识别依赖关系，wire 是编译前计算依赖关系
2. dig 只能在代码运行时，才能知道哪个依赖不对，比如构造函数返回类型的是结构体指针，但是其他依赖的是interface，这样的错误只能在运行时发现，而wire可以在编译的时候就发现。
3. 由于采用了依赖注入，所以在代码调试时可以注入一些mock 服务或者函数，wire在mock上支持更友好些，dig的话可以通过build tag 来使用mock。 个人比较推荐使用wire，可以在编译时就发现问题，避免了 多次的build和尝试后才解决编译问题。更多的使用方式和最佳实践，可以参考官方文档。

# Reference
1. https://jerryzhou343.github.io/post/di/